# Простой автоматический реобас
## Описание
Маленький блок для управления вентиляторами 2/3/4 pin: 2/3pin управляются ШИМ-сигналом через транзистор `IRF3205`, 4pin - напрямую.
Для управления используется ШИМ-сигнал. Подразумевается, что он приходит с разъема вентилятора процессора и (опционально) видеокарты.
Выходные сигналы делятся на две группы, могут быть объединены в одну большую.
Выходной сигнал может быть вычислен несколькими способами (см. раздел [Назначение пинов](#mutation-mode)).

**Предполагаемое использование**:
* при нехватке разъемов на материнской плате,
* для более ступенчатого управления без постоянных изменений скорости,
* установка минимальной скорости вращения (пока одна на все выходы),
* переключение в режимы с максимальной и минимальной скоростями.

## Назначение пинов
* `D2`, `D3` - пины чтения PWM для первой и второй группы соответственно,
* `D4`, `D5` - переключатели выбора режима скорости,
* `D6`, `D7` - переключатели выбора режима вычисления выходного сигнала,
* `D8` - переключатель для объединения выходных групп,
* `D9`, `D10` - пины выходного PWM сигнала для второй группы соответственно.

**Типы пинов**:
* input_pullup: `D4`-`D8`,
* input: `D2`, `D3`,
* output: `D9`, `D10`.

**Режимы скорости**:
* `D4=0` - максимальная,
* `D5=0` - минимальная,
* иначе - на основе входного.

<a id="mutation-mode"></a>
**Режимы вычисления выходного сигнала**:
* `D6=0` - максимальный из входных,
* `D7=0` - без изменений относительно входного,
* иначе - максимальный для одной группы и усредненный для второй.

**Переключатель объединения выходных групп**: `D8=0` - объединить группы.


## Настройка
* Минимальная скорость настраивается "хардкорно" в коде, вычисляется индивидуально; `TODO`: сделать через потенциометр;
* ступенчатость управления настраивается "хардкорно" в коде, вычисляется индивидуально; `TODO`: сделать через 2 битный переключатель режимы деления на 4, 5, 8 и 10 отрезков;
* режим `debug` включается "хардкорно" в коде; `TODO`: сделать переключатель;
